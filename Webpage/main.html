<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
  <meta charset="utf-8">
  <title>CSU Internet Access</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="shortcut icon" type="image/jpg" href="favicon.ico" />
</head>

<body>

  <div class="scroll-container">
    <div class="scroll-area" style="background: #E4AD7C">
      <div class="header-bar">CSU Internet Access</div>

      <section class="work-area">
        <div class="mappings">
          <div class="mapping-internet" id="mapping-internet">ISP Options:
            <form class="isp" onsubmit="return false">
              <label for="address">Address:</label>
              <input type="text" id="address" name="address">
              <label for="city">City:</label>
              <input type="text" id="city" name="city">
              <label for="zip">Zip Code:</label>
              <input type="text" id="zip" name="zip">
              <button type="submit">Submit</button>
            </form>
            <table id="table"></table>
          </div>
          <div class="mapping-wifi" id="mapping-wifi">Heatmap</div>
        </div>
      </section>

    </div>
    <div class="scroll-area" style="background: #FCF0CC">
      <div class="header-bar">About</div>

      <section class="content">
        <div class="cards">
          <div class="card">
            <div class="card__side card__side--front card__side--front-1">
              <div class="card__description">Who We Are</div>
            </div>
            <div class="card__side card__side--back card__side--back-1">
              <div class="card__description">
                Group Members: Val Jarvis, Ian Wu, Ally Badza, Richard Sent</br></br>
                We are a group of senior, computer science students at Cleveland State. We are currently in CIS 454,
                Computer Networks.</br></br>
                This class has allowed us to explore multiple different paths of ComputerNetworks that we have been
                interested in learning.
              </div>
            </div>
          </div>
          <div class="card">
            <div class="card__side card__side--front card__side--front-2">
              <div class="card__description">Project Description</div>
            </div>
            <div class="card__side card__side--back card__side--back-2">
              <div class="card__description">For this project, we have decided to help the everyday internet user
                through two means. The first is creating a search feature by the userâ€™s address to see what Internet
                Service Providers service their area so that cost, plan types, and new technology can be easily seen and
                filtered for. The second way is by allowing a user who seeks to use public networks by Cleveland State
                to see what different options are best to use for a given area, or to see if they fall within a deadzone
                of sorts. These two features go hand in hand to inform an average user in an accessible and easy to
                understand manner of what options are best for them. </div>
            </div>
          </div>
          <div class="card">
            <div class="card__side card__side--front card__side--front-3">
              <div class="card__description">Additional Information</div>
            </div>
            <div class="card__side card__side--back card__side--back-3">
              <div class="card__description"></div>
            </div>
          </div>
        </div>
      </section>

    </div>
  </div>

  <script>

  var s = '{"44109" :{ "Cox":[{"plan_name": "Fiber", "speed" : "1000 MBPS", "price" : "$60"},{"plan_name": "Fiber", "speed" : "1000 MBPS", "price" : "$60"}], "Verizon":[{"plan_name": "Fiber", "speed" : "1000 MBPS", "price" : "$20"}]}}';

    function handleSubmit(event) {
      event.preventDefault();

      //Change screen
      document.getElementById('mapping-wifi').style.visibility = 'hidden';
      document.getElementById('mapping-internet').style.height = '8.5em';
      document.getElementById('mapping-internet').style.overflow = 'scroll';
      document.getElementById('table').style.visibility = 'visible';

      //table
      var table = document.getElementById("table");
      table.innerHTML = "";
      var row = table.insertRow(0);
      var cell1 = row.insertCell(0);
      var cell2 = row.insertCell(1);
      var cell3 = row.insertCell(2);
      var cell4 = row.insertCell(3);

      cell1.innerHTML = "ISP";
      cell2.innerHTML = "Plan Name";
      cell3.innerHTML = "Speed";
      cell4.innerHTML = "Price";


      const data = new FormData(event.target);
      const zip = data.get('zip');

      var rowNum = 1;

      const obj = JSON.parse(s);
      jzips = Object.keys(obj);
      for(var x in jzips) {
        var jzip = jzips[x]; //zip code
        if(jzip == zip) {
          const zipObj = obj[jzip];
          providers = Object.keys(zipObj);
          for(var x in providers) {
            var provider = providers[x]; //provider name
            const arrayInfo = zipObj[provider];
            info = Object.keys(arrayInfo);
            for(var x in info) {
              var row = table.insertRow(rowNum);
              var cell1 = row.insertCell(0);
              var cell2 = row.insertCell(1);
              var cell3 = row.insertCell(2);
              var cell4 = row.insertCell(3);
              cell1.innerHTML = provider;
              cell2.innerHTML = arrayInfo[info[x]].plan_name;
              cell3.innerHTML = arrayInfo[info[x]].speed;
              cell4.innerHTML = arrayInfo[info[x]].price;
              rowNum++;

            }
          }

        }
      }

    }

    const form = document.querySelector('form');
    form.addEventListener('submit', handleSubmit);

  </script>

</body>

</html>
